# 🚀 快速开始指南

## 最快启动方式（3步）

### 1️⃣ 安装依赖
```bash
cd /root/autodl-tmp/InstructScene/web_interface
pip install flask flask-cors
```

### 2️⃣ 启动服务器
```bash
python run.py
```

### 3️⃣ 打开浏览器
访问：**http://localhost:6006**

---

## 🎮 5分钟上手教程

### 步骤 1：加载模板
1. 在左侧面板选择"房间类型"为 `bedroom`
2. 在"预设模板"下拉框选择 `简单卧室`
3. 中间的场景图会自动显示：1个床 + 2个床头柜

### 步骤 2：编辑场景图
- **添加物体**：从"添加物体"下拉框选择物体，点击"添加到场景"
- **添加关系**：选择源物体、关系类型、目标物体，点击"添加关系"
- **删除**：右键点击节点或边即可删除

### 步骤 3：生成场景
1. 点击左侧的"🎲 生成3D布局"按钮
2. 等待几秒钟...
3. 右侧面板会显示生成的布局结果：
   - 每个物体的位置坐标
   - 物体尺寸（长×宽×高）
   - 旋转角度

---

## 💡 常见问题

### Q: 服务器启动失败？
**A:** 检查是否安装了必要的依赖和模型文件
```bash
# 安装依赖
pip install flask flask-cors torch numpy

# 检查模型文件
ls -l out/threedfront_objfeat_vqvae/
ls -l out/bedroom_sg2scdiffusion_objfeat/
```

### Q: 生成失败显示错误？
**A:** 可能原因：
- GPU 内存不足：尝试重启 Python 进程
- 模型文件缺失：确保模型已正确下载
- 场景图配置无效：确保添加了足够的物体和关系

### Q: 如何修改端口？
**A:** 编辑 `run.py`，修改最后一行：
```python
app.run(host='0.0.0.0', port=8080, debug=True)  # 改为 8080
```

### Q: 如何在远程服务器上访问？
**A:** 使用端口转发（SSH）：
```bash
ssh -L 6006:localhost:6006 user@server
```
然后在本地浏览器访问 `http://localhost:6006`

---

## 🎨 界面功能一览

### 左侧面板
- 场景配置（房间类型、模板、参数）
- 添加物体
- 添加关系
- 生成按钮
- 场景统计

### 中间面板
- 交互式场景图编辑器
- 支持拖拽、选中、删除
- 可视化物体和关系

### 右侧面板
- 显示生成结果
- 物体布局详情（位置、尺寸、角度）

---

## 📊 示例场景配置

### 简单卧室
```
物体: 1床 + 2床头柜
关系:
- 床 左侧 床头柜1
- 床 右侧 床头柜2
```

### 标准卧室
```
物体: 1床 + 2床头柜 + 1衣柜
关系:
- 床 左侧 床头柜1
- 床 右侧 床头柜2
- 床 前面 衣柜
```

### 简单客厅
```
物体: 1沙发 + 1茶几
关系:
- 沙发 后面 茶几
- 茶几 前面 沙发
```

---

## 🎯 进阶使用

### 导出场景配置
点击"导出JSON"按钮，保存场景图配置为 JSON 文件，可以用于：
- 分享场景设计
- 批量生成场景
- 与其他工具集成

### 调整生成参数
- **CFG Scale (1.0-3.0)**：控制生成的多样性
  - 值越小：生成结果越随机
  - 值越大：生成结果越符合训练数据分布

---

## 🛠️ 故障排除

### 启动时显示 ImportError
```bash
# 缺少 diffusers
pip install diffusers

# huggingface_hub 版本问题
pip install --upgrade diffusers
# 或
pip install huggingface_hub==0.19.4
```

### 生成时显示 CUDA out of memory
```python
# 在 app.py 中修改设备为 CPU
device = 'cpu'  # 替换 'cuda:0'
```

---

## 📞 获取帮助

- 查看完整文档：`README.md`
- 查看 API 文档：服务器启动后访问 `/api/`
- 提交 Issue：GitHub Issues

---

**祝你使用愉快！** 🎉

